pipeline {
	agent any	

	stages {
		stage('Build') {
			steps {
				echo 'Building..'
				bat 'mvn install -f formacaoJava2019/pom.xml'
			}
		}
		
		stage('Test') {
			steps {
			
				echomyname([name: "Ricardo", location="Java Formacao"])
				
			}
		}
		
		stage('Deploy') {
			steps {
				echo 'Deploying....'
				bat "xcopy \"formacaoJava2019\\target\\formacaoJava2019-0.0.1-SNAPSHOT.war\" \"C:\\Tomcat\\apache-tomcat-8.5.46\\webapps\" /y"
			}
		}
	}
	post {
        always {
            echo 'I will always say Hello again!'
            
            //emailext body: "${currentBuild.currentResult}: Job ${env.JOB_NAME} build ${env.BUILD_NUMBER}\n More info at: ${env.BUILD_URL}",
			//recipientProviders: [[$class: 'DevelopersRecipientProvider'], [$class: 'RequesterRecipientProvider']],
			//subject: "Jenkins Build ${currentBuild.currentResult}: Job ${env.JOB_NAME}",
			//to: 'ricardo_varelas@hotmail.com'
        }
    }
}